---
title: d3 渐变图例
abbrlink: 6dbbd728
date: 2019-10-23 16:28:03
tags:
---

+ color渐变 d3.interpolateBlues
+ defs linearGradient 做渐变背景

![渐变图例](../../images/20191023162644.png)

```bash
			let defs = this.svg.append("defs");
			let start = 20 ,width = 15,height = 130 ,pad = 50

			let linear = defs.append("linearGradient")
				.attr("id", "linearColor")
				.attr("x1", "0%")
				.attr("y1", "0%")
				.attr("x2", "0%")
				.attr("y2", "100%");

			linear.append("stop")
				.attr("offset", "0%")
				.style("stop-color", d3.interpolateBlues(1));

			linear.append("stop")
				.attr("offset", "100%")
				.style("stop-color", d3.interpolateBlues(num))

			this.svg.append('rect')
				.attr('x', start)
				.attr('y', this.height - height - pad)
				.attr('width', width)
				.attr('height', height)
				.style('fill', 'url(#linearColor')
			let g = this.svg.append('g')
			g.append('path')
				.attr('d', ()=>{
					let x = start + width
					let x1 = start + width + 11
					let y = this.height - height - pad
					let y1 = this.height - height - pad - 11
					return 'M ' + x + ' ' + y + ' L ' + x1 + ' ' + y + ' L ' + x1 + ' ' + y1 + ' Z ';
				})
				.style('fill', d3.interpolateBlues(1))

			g.append('path')
				.attr('d', ()=>{
					let x = start + width
					let x1 = start + width + 11
					let y = this.height  - pad
					let y1 = this.height  - pad + 11
					return 'M ' + x + ' ' + y + ' L ' + x1 + ' ' + y + ' L ' + x1 + ' ' + y1 + ' Z ';
				})
				.style('fill', d3.interpolateBlues(num))
			this.svg.append('text')
				.attr('x', start)
				.attr('y', this.height - height - pad)
				.attr('dx', 2)
				.attr('dy', -4)
				.text('高')
				.style('font-size', '11px')
			this.svg.append('text')
				.attr('x', start)
				.attr('y', this.height - pad)
				.attr('dx', 2)
				.attr('dy', 15)
				.text('低')
				.style('font-size', '11px')
```